<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upah Bulanan</title>

<style>
body{
  font-family: Arial;
  background:#f4f6f9;
  padding:20px;
}

.container{
  max-width:1000px;
  margin:auto;
  background:white;
  padding:20px;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

h2{
  text-align:center;
  margin-bottom:20px;
}

.grid{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:15px;
}

.card{
  background:#ffffff;
  border-radius:10px;
  padding:15px;
  box-shadow:0 3px 8px rgba(0,0,0,0.08);
}

.card h3{
  text-align:center;
  margin-bottom:10px;
}

.item{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  border-bottom:1px solid #eee;
  padding:4px 0;
}

.total{
  margin-top:10px;
  font-weight:bold;
  text-align:right;
  font-size:14px;
}
</style>
</head>
<body>

<div class="container">
<h2>Rekap Upah Bulanan</h2>

<div class="grid">
  <div class="card">
    <h3>Soleh</h3>
    <div id="Soleh"></div>
    <div class="total" id="totalSoleh"></div>
  </div>

  <div class="card">
    <h3>Farhan</h3>
    <div id="Farhan"></div>
    <div class="total" id="totalFarhan"></div>
  </div>

  <div class="card">
    <h3>Yudi</h3>
    <div id="Yudi"></div>
    <div class="total" id="totalYudi"></div>
  </div>

  <div class="card">
    <h3>Zaka</h3>
    <div id="Zaka"></div>
    <div class="total" id="totalZaka"></div>
  </div>
</div>
</div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTAP_R50frV13whqx54ctjplc-8xhcN53rHEVk5mkhLeZE283xWnr6TdTBFr-KFymEiaYE_NWgGthpo/pub?gid=716772016&single=true&output=csv";

const upahPerHari = {
  "Soleh": 100000,
  "Farhan": 50000,
  "Yudi": 100000,
  "Zaka": 100000
};

fetch(sheetURL)
.then(res => res.text())
.then(data => {

  const rows = data.split("\n").slice(1);
  const bulanSekarang = new Date().getMonth() + 1;

  let dataHarian = {
    "Soleh": new Set(),
    "Farhan": new Set(),
    "Yudi": new Set(),
    "Zaka": new Set()
  };

  rows.forEach(row => {
    const cols = row.split(",");
    const tanggalStr = cols[0];
    const nama = cols[4];

    if(!tanggalStr || !upahPerHari[nama]) return;

    const parts = tanggalStr.split("/");
    const hari = parts[0];
    const bulan = parseInt(parts[1]);

    if(bulan === bulanSekarang){
      dataHarian[nama].add(hari); // simpan tanggal unik
    }
  });

  for(let nama in dataHarian){

    let total = 0;

    dataHarian[nama].forEach(hari => {
      document.getElementById(nama).innerHTML +=
        `<div class="item">
          <span>Tgl ${hari}</span>
          <span>Rp ${upahPerHari[nama].toLocaleString("id-ID")}</span>
        </div>`;
      total += upahPerHari[nama];
    });

    document.getElementById("total"+nama).innerText =
      "Total: Rp " + total.toLocaleString("id-ID");
  }

});
</script>
</body>
</html>
